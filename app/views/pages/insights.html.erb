<div class="insight-main">
  <div class="first-chart">
    <%# line_chart User.group_by_day(:created_at).count %>
  </div>
  <div class="first-chart">
    <h1>Tenants by country</h1>
    <%= pie_chart User.where(tenant: "true").group(:nationality).count %>
  </div>
  <div class="first-chart">
    <h1>Tenants Nationality</h1>
    <%= geo_chart User.group(:nationality).count %>
    <!-- Need to add project to google cloud to get API key -->
  </div>
  <div class="first-chart">
    <h1>No of complaints per Tenant</h1>
    <%= line_chart @tenants.map { |tenant|
        {name: tenant.first_name, data: Complaint.where(tenant_id: tenant.id).group_by_day_of_week(:created_at).count}
    } %>
  </div>
  <div class="first-chart">
    <h1>Occupency</h1>
    <% totalunits = Unit.all.count %>
    <%= occupied = Unit.where(available: false).count %>
    <%= available = Unit.where(available: true).count %>
    <h2>Units available</h2>
    <%= bar_chart [["Occupenied", "#{occupied}"], ["Available", "#{available}"]] %>
    <h2>Occupency Percentage</h2>
    <%= pie_chart [["Occupenied", "#{occupied / totalunits}"], ["Available", "#{available / totalunits}"]] %>
    <%# dev1 = (Development.find(1).units.count) %>
    <%# dev2 = Development.find(2).units.count %>
    <%# pie_chart [["#{Development.find(1).name}", "#{dev1}"], ["#{Development.find(2).name}", "#{dev2}"]] %>
  </div>
  <div class="first-chart">
    <%= @resolvedcomplaints %>
  </div>
  <div class="first-chart">
    <h1>Employee performance</h1>
    <h2></h2>
    <%= line_chart @employees.map { |employee|
        {name: employee.first_name, data: Report.where(employee_id: employee.id).group_by_day_of_week(:updated_at).count}
    } %>
  </div>
</div>

